:root{
    --bg-0:#08100b; --bg-1:#0e1a13; --ink:#e7fbe9; --muted:#b6e6c0;
    --accent:#34d399; --accent-2:#16a34a; --accent-3:#0ea5a6;
    --line:#244a36; --panel:#0d1511; --panel-b:#173223; --ring:#43ffb6;
    --shadow:0 20px 60px rgba(0,0,0,.55);
    --warn:#ffd166; --err:#ff9aa2;
}

body{
    margin:0; height:100vh; display:flex; align-items:center; justify-content:center;
    color:var(--ink); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    background:
    radial-gradient( circle at 25px 25px, rgba(73,140,101,.14) 0 18px, transparent 18px ),
    radial-gradient( circle at 0 0, rgba(58,114,85,.12) 0 18px, transparent 18px ),
    radial-gradient( 1200px 800px at 20% 0%, rgba(22,163,74,.08), transparent 40% ),
    radial-gradient( 900px 600px at 80% 100%, rgba(14,165,166,.07), transparent 45% ),
    linear-gradient(180deg, var(--bg-0), var(--bg-1));
    background-size:50px 50px,50px 50px,100% 100%,100% 100%,100% 100%;
    overflow:hidden;
}

.container { display:flex; gap:22px; width:min(1100px, 95vw); padding:22px; }

.panel{
    position:relative; flex:1; min-width:320px;
    background:
    linear-gradient(180deg, rgba(255,255,255,.03), transparent 20%),
    linear-gradient( to bottom right, rgba(76,175,80,.05), rgba(0,0,0,0) 60%), var(--panel);
    border:1px solid var(--panel-b); border-radius:16px; padding:18px 16px 20px;
    box-shadow: var(--shadow); overflow:hidden;
}
.panel:before{ content:""; position:absolute; inset:0;
    background: radial-gradient(800px 400px at 20% -10%, rgba(52,211,153,.12), transparent 60%);
    pointer-events:none;
}

h2{
    margin:0 0 10px; letter-spacing:.3px; font-weight:800;
    background: linear-gradient(90deg, var(--accent), var(--accent-3));
    -webkit-background-clip:text; background-clip:text; color:transparent;
    display:flex; align-items:center; gap:.6rem;
}
h2::before{
    content:""; width:22px; height:22px; flex:0 0 22px;
    background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 14c2.5 2.2 6.5 1.8 8.8-.5 1.2-1.2 2.2-3.3 1.8-5.2-.3-1.4-1.6-2.3-3-2-2.2.5-3 2.6-3.3 3.7-.3 1.1-1.3 1.6-2.4 1.3-1.1-.3-1.9-1.5-1.6-2.6.4-1.3 1.2-2.8 2.9-3.9C12- .1 20 5.3 18.9 11.3c-.3 1.6-1.2 3.1-2.4 4.3l2.3 2.3c.4.4.4 1 0 1.4-.4.4-1 .4-1.4 0l-2.1-2.1c-1.2.8-2.6 1.3-4 1.5l.2 2.6c.1.6-.4 1.1-1 1.2-.6.1-1.1-.4-1.2-1l-.2-2.6c-1.1-.2-2.2-.6-3.2-1.2l-1.5 1.5c-.4.4-1 .4-1.4 0s-.4-1 0-1.4l1.3-1.3C3.3 15.6 4.6 14.9 6 14z" fill="%2334d399"/></svg>');
    background-size:contain; background-repeat:no-repeat;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,.35));
}

canvas{
    border-radius:12px; display:block; margin:4px auto 0;
    background:#0a120d; border:1px solid var(--line); outline:1px solid rgba(67,255,182,.08);
}

/* Bigger guide text */
#mazeHint{ margin:10px 0 2px; font-size:14px; color:var(--muted); opacity:.95; }
#guideBar{
    margin-top:10px; display:flex; gap:10px; align-items:flex-start;
    background:linear-gradient(180deg,rgba(255,255,255,.04),rgba(255,255,255,0));
    border:1px solid var(--panel-b); border-radius:12px; padding:12px 14px;
}
#guideIcon{
    width:26px; height:26px; flex:0 0 26px; border-radius:50%;
    background: radial-gradient(circle at 40% 35%, #caffde, #29c28a);
    box-shadow: 0 0 0 2px rgba(41,194,138,.2);
}
#guideText{ line-height:1.45; font-size:16px; font-weight:800; color:#ddffee; }
#guideSub { font-size:14px; color:#a2e6c3; }

/* Slider */
.slider-track{ position:relative; height:12px; margin-top:20px; user-select:none;
    background: linear-gradient(90deg, rgba(52,211,153,.15), rgba(14,165,166,.15)), linear-gradient( to bottom, #0e1a13, #0a110d);
    border-radius:999px; border:1px solid var(--panel-b); box-shadow: inset 0 1px 4px rgba(0,0,0,.45);
}
.slider-fill{
    position:absolute; inset:0 auto 0 0; width:0%;
    background: linear-gradient(90deg, var(--accent), var(--accent-3));
    border-radius:999px; box-shadow: 0 0 16px rgba(52,211,153,.35);
    animation: breathe 3s ease-in-out infinite;
}
.slider-thumb{
    position:absolute; top:50%; transform: translate(-50%, -50%);
    width:28px; height:28px; border-radius:50%;
    background:
    radial-gradient(circle at 45% 35%, #e7ffef 0 12px, transparent 13px),
    radial-gradient(40% 40% at 45% 35%, #0a1511 0 6px, transparent 7px),
    radial-gradient(circle at 50% 50%, #6cf0b1, #1aa968);
    border:2px solid #063d2b; box-shadow: 0 6px 18px rgba(0,0,0,.5), inset 0 0 0 2px rgba(255,255,255,.05);
}
.readonly{ pointer-events:none; opacity:.97; }

#volumeLabel{ margin-top:8px; font-weight:700; letter-spacing:.2px; }
#statusMsg{ margin-top:8px; font-size:13px; color:#8be6ff; min-height:1em; }

button, .btn{
    border:1px solid var(--panel-b);
    background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0));
    color:var(--ink); border-radius:10px; padding:9px 12px; cursor:pointer;
    transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
    box-shadow: 0 8px 18px rgba(0,0,0,.35);
}
button:hover, .btn:hover{ transform: translateY(-1px); border-color:#2f6e51; }
.btn-primary{
    background: linear-gradient(90deg, var(--accent), var(--accent-3));
    border-color:#0f7251; color:#082116; font-weight:800; text-shadow: 0 1px 0 rgba(255,255,255,.18);
}
.btn-primary:hover{ box-shadow: 0 0 0 3px rgba(52,211,153,.18), 0 8px 22px rgba(0,0,0,.45); }

/* Modal */
.modal-backdrop{
    position:fixed; inset:0; display:none;
    background: radial-gradient(60% 60% at 50% 50%, rgba(0,0,0,.45), rgba(0,0,0,.75));
    align-items:center; justify-content:center; z-index:1000;
}
.modal-window{
    width:min(600px, 92vw);
    background:
    radial-gradient(120% 120% at 0% 0%, rgba(52,211,153,.12), transparent 60%),
    linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,0)),
    #0b1511;
    border:1px solid #1d3f2b; border-radius:16px; box-shadow: var(--shadow);
    padding:18px 18px 14px; position:relative; overflow:hidden;
}
.modal-title{ font-weight:900; margin:0 0 6px; color:#dcffee; letter-spacing:.3px; }
.modal-message{ color:#cfeee0; margin:0 0 14px; line-height:1.5; min-height:56px;}
.modal-actions{ display:flex; justify-content:flex-end; gap:8px; }

/* Fun effects */
.shake{ animation:shake .4s ease; }
@keyframes shake{
    0%,100%{ transform:translateX(0) }
    20%{ transform:translateX(-6px) }
    40%{ transform:translateX(5px) }
    60%{ transform:translateX(-4px) }
    80%{ transform:translateX(3px) }
}
.spinner{ position:absolute; top:8px; right:12px; width:18px; height:18px; border-radius:50%; border:3px solid rgba(255,255,255,.15); border-top-color:#8bfcc7; animation: spin 1s linear infinite; display:none; }
@keyframes spin{ to { transform: rotate(360deg); } }

audio#bgm{ display:none; }
.form-row{ display:flex; gap:10px; align-items:center; }
.grow{ flex:1; }
input[type="number"], input[type="text"]{
    background:#0f1a14; color:#dcffee; border:1px solid #1d3f2b; border-radius:8px; padding:8px 10px; width:100%;
}
input[type="range"]{ width:100%; }
.hint{ color:#9ee0b2; font-size:12px; margin-top:6px; }
.err{ color:var(--err); font-size:13px; margin-top:6px; }
.warn{ color:var(--warn); font-size:13px; margin-top:6px; }

/* Runaway button */
.runaway{ position:relative; }
.runaway.move{ position:absolute; }
/* Hide utility */
.hidden{ display:none !important; visibility:hidden !important; }
